(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{531:function(t,s,a){"use strict";a.r(s);var e=a(4),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("引言：Valine评论系统本身并不自带新增评论提醒功能，好在光顾网友站点的时候发现了两个非常宽松推送API：Server酱，Qmsg酱。分别对应微信和QQ，自己琢磨着写了几行JS代码，能利用以上两个API专门针对Valine评论进行推送提醒，下面就让我们进入正题吧。\n")]),t._v(" "),a("p",[t._v("先上几张效果图：\n"),a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.c46P0VuT7phPcjQnSYNhZMQxi6sYqktQe83en7FjyYHm9Y.7YZIKj0RgY6DJpTZ2F7Jr6v4hEOXn8WJoXm7Nn8!/r",alt:""}}),t._v(" "),a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.TaBuMkz7HfY0th6j*bhEWbBo8fqPCEqhDIEtH*FKKbwBH0cH0zXx1q5gU6PjUNYmNCSOs5QHqr6J9EQ*gmL1DA!/r",alt:""}}),t._v(" "),a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.RFCR1OSrVvVDPGY2oVcloDzLMf2ja6taUeqbK42FOT8IB2ohgwLejxi0*Zt043fqa1gB.fNMcYMxHvA9lGgk*s!/r",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("下面来说如何实现，实现方案是基于hexo或者静态页面的。")])]),t._v(" "),a("h2",{attrs:{id:"sever酱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sever酱"}},[t._v("#")]),t._v(" Sever酱")]),t._v(" "),a("h3",{attrs:{id:"_1-打开sever酱网站链接，点击github一键登入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-打开sever酱网站链接，点击github一键登入"}},[t._v("#")]),t._v(" 1.打开"),a("a",{attrs:{href:"http://sc.ftqq.com/3.version",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sever"),a("OutboundLink")],1),t._v("酱网站链接，点击GitHub一键登入")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.b5pJSBa8KuVMzzA66T7S.ltSe2E3vLaEfztaRcAvv2jxIX*PGmv1gl*AUZt8vEKXcqFEpGR9ydmmXM04Fszbkc!/r",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_2-到微信推送页面，按照提示绑定微信（需要关注server酱公众号）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-到微信推送页面，按照提示绑定微信（需要关注server酱公众号）"}},[t._v("#")]),t._v(" 2.到"),a("code",[t._v("微信推送")]),t._v("页面，按照提示绑定微信（需要关注Server酱公众号）")]),t._v(" "),a("h3",{attrs:{id:"_3-获取sckey并保存记录下载，等会要用到"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-获取sckey并保存记录下载，等会要用到"}},[t._v("#")]),t._v(" 3.获取"),a("code",[t._v("SCKEY")]),t._v("并保存记录下载，等会要用到")]),t._v(" "),a("h3",{attrs:{id:"_4-将以下js代码粘贴到博客网站引用的js文件中，这里我用的是matery主题，我把它粘贴到source-js-matery-js文件底部，另起一行直接粘贴即可"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-将以下js代码粘贴到博客网站引用的js文件中，这里我用的是matery主题，我把它粘贴到source-js-matery-js文件底部，另起一行直接粘贴即可"}},[t._v("#")]),t._v(" 4.将以下JS代码粘贴到博客网站引用的JS文件中，这里我用的是matery主题，我把它粘贴到"),a("code",[t._v("source/js/matery.js")]),t._v("文件底部，另起一行直接粘贴即可")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("var title"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("="),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text=KZblog又有新评论啦~！--by Valine"')]),t._v("\nvar SCKEY_Server="),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\nvar ValineButton=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vsubmit vbtn"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(";\nfunction send_valine_Server()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    var text="),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"desp="')]),t._v(";\n    var pagename=document.title;\n    var wz=pagename.indexOf('|');\n    var res=pagename.substring("),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("wz);\n    var pageurl=document.URL;\n    var ptime=new Date();\n    var vnick=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vnick vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var vmail=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vmail vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var vlink=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vlink vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var veditor=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"veditor vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var data=text+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|昵称："')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|邮箱："')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|网站地址："')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|当前页面："')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|评论内容："')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|跳转链接："')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|评论时间"')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n"')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|----|----|----|----|"')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n"')]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|   "')]),t._v("+vnick+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"   |   "')]),t._v("+vmail+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"  |  "')]),t._v("+vlink+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|   "')]),t._v("+res+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"| "')]),t._v("+veditor+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"| "')]),t._v("+pageurl+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(" +ptime.toLocaleString()+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"|"')]),t._v(";\n    var httpRequest = new XMLHttpRequest();"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一步：创建需要的对象")]),t._v("\n    httpRequest.open('POST'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 'https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//sc.ftqq.com/'+SCKEY_Server+'.send', true); //第二步：打开连接")]),t._v("\n    httpRequest.setRequestHeader("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/x-www-form-urlencoded"')]),t._v(");"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）")]),t._v("\n    httpRequest.send(title"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"&"')]),t._v("+data);"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发送请求 将情头体写在send中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(";\nValineButton.onclick=send_valine_Server;\n")])])]),a("p",[t._v("如果你想适配你的站点，只需要修改SCKEY_Server的值和title1的值即可，将之前获取到的SCKEY的值填入双引号之中，比如"),a("code",[t._v('SCKEY_Server="SCUXXXXXXXXXXXXXXXXXXXX706c"')]),t._v("，将title1里text=而不是第4行的var text后面的内容修改成你想要的内容即可（注意：不要将最后的引号删掉了）\n"),a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.Z.7vnzprKgsVDprkfxNyEc*p.hHePStY2NR4xurqmB5RxiFuLpJtgCKE8UV3tf.rihCwfD7MTESEtEbHpUEYMk!/r",alt:""}})]),t._v(" "),a("p",[a("code",[t._v("title1")]),t._v("对应下图中红色方框的部分标题，内容我写好了模板，会显示昵称、邮箱、网站地址、当前页面、评论内容、跳转链接、评论时间，以表格的形式显示出来。\n"),a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.XgimFlMhY8OFBo6Ypv28tUK3xug1ys3A.vT0vc.OMPtt9tplPFIsmV.1woUo.Y3y7.5JBshs.kK0hPl6fM2BZw!/r",alt:""}})]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"qmsg酱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qmsg酱"}},[t._v("#")]),t._v(" Qmsg酱")]),t._v(" "),a("h3",{attrs:{id:"_1-进入qmsg酱网站，一键qq登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-进入qmsg酱网站，一键qq登录"}},[t._v("#")]),t._v(" 1.进入Qmsg酱网站，一键QQ登录")]),t._v(" "),a("h3",{attrs:{id:"_2-选择qmsg酱小姐姐，并添加qq号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-选择qmsg酱小姐姐，并添加qq号"}},[t._v("#")]),t._v(" 2.选择Qmsg酱小姐姐，并添加QQ号")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.eOQNiMxWknOZbzLLIp*0r.OPNojBm37PVPZ12*kQt78RNUTWh90NPJlESLphb1Cf1KuVXv8C69HK4xgcT8oG44!/r",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_3-将接口地址保存记录下来，等会要用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-将接口地址保存记录下来，等会要用"}},[t._v("#")]),t._v(" 3.将接口地址保存记录下来，等会要用")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.RnCYNxBZ6lVHX.2*XeguzCMWEa6ung7arDE.BXzM8Zxvn7dWp0DB.cNE4KjL*XMtLvPO7uPtiZbstUDMhg4.f0!/r",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"_4-将以下代码像server酱的代码一样粘贴到随便一个引用的js文件中，比如粘贴到matery-js底部另起一行直接粘贴"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-将以下代码像server酱的代码一样粘贴到随便一个引用的js文件中，比如粘贴到matery-js底部另起一行直接粘贴"}},[t._v("#")]),t._v(" 4.将以下代码像Server酱的代码一样粘贴到随便一个引用的JS文件中，比如粘贴到"),a("code",[t._v("matery.js")]),t._v("底部另起一行直接粘贴")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("var title"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("="),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"msg=KZblog又有新评论啦~！--by Valine\\n"')]),t._v("\nvar SCKEY_Qmsg="),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\nfunction send_valine_Qmsg()"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    var pagename=document.title;\n    var wz=pagename.indexOf('|');\n    var res=pagename.substring("),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("wz);\n    var pageurl=document.URL;\n    var ptime=new Date();\n    var vnick=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vnick vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var vmail=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vmail vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var vlink=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vlink vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var veditor=document.getElementsByClassName("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"veditor vinput"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".value;\n    var data="),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"昵称："')]),t._v("+vnick+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n邮箱："')]),t._v("+vmail+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n网站地址："')]),t._v("+vlink+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n当前页面："')]),t._v("+pagename+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n评论内容："')]),t._v("+veditor+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n跳转链接："')]),t._v("+pageurl+"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n评论时间"')]),t._v("+ptime.toLocaleString();\n    var httpRequest = new XMLHttpRequest();"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一步：创建需要的对象")]),t._v("\n    httpRequest.open('POST'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("SCKEY_Qmsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("); "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第二步：打开连接")]),t._v("\n    httpRequest.setRequestHeader("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/x-www-form-urlencoded"')]),t._v(");"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）")]),t._v("\n    httpRequest.send(title"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("+data);"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发送请求 将情头体写在send中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(";\nValineButton.onclick=send_valine_Qmsg;\n")])])]),a("p",[t._v("修改SCKEY_Qmsg值，将先前保存的接口地址填入即可，比如"),a("code",[t._v('SCKEY_Qmsg="https://qmsg.zendee.cn:443/send/85XXXXXXXXXXXX2433.html"')]),t._v("，title2中"),a("code",[t._v("msg=")]),t._v("后面的内容可以随意修改，保留后面的\\n用来换行，不然排版不好看。然后重新生成静态页面就能成功接收推送了")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://r.photo.store.qq.com/psc?/V14RBB4W1HO62x/iXs1ae7hmJtTd.wIcSd4.ch9O553v.oiNHgORxzYe.Bht2rdQnZWjne0OdyzqQtrBhmL3y8iAqrGhInEJ0aeC3muZ38F6U3Hmgtz4zrRwiE!/r",alt:""}})]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("原文链接: "),a("a",{attrs:{href:"https://blog.zyskys.com/posts/bd75.html?tdsourcetag=s_pctim_aiomsg",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.zyskys.com/posts/bd75.html?tdsourcetag=s_pctim_aiomsg"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);